{"version":3,"sources":["webpack:///src/views/user/VaildEmail.vue","webpack:///./src/views/user/VaildEmail.vue?70f6","webpack:///./src/views/user/VaildEmail.vue","webpack:///src/views/user/UserInfomation.vue","webpack:///./src/views/user/UserInfomation.vue?cc51","webpack:///./src/views/user/UserInfomation.vue"],"names":["VaildEmail","name","data","email","captchaInfo","code","token","form","this","$form","createForm","visible","confirmLoading","methods","show","getCaptcha","handleOk","_this","validateFields","force","errors","values","console","log","captcha","Object","login","then","res","success","$notification","message","resetFields","$emit","error","errorTips","catch","ex","handleCancel","_this2","handleValidCaptcha","rule","value","callback","undefined","length","user_VaildEmail","render","_h","$createElement","_c","_self","attrs","title","cancelText","okText","on","ok","cancel","wrapper-col","span","has-feedback","directives","rawName","rules","required","validator","validateTrigger","expression","type","placeholder","staticRenderFns","userTypeMap","0","text","1","userStatusMap","true","false","UserInfomation","components","__webpack_require__","normalizeComponent","ssrContext","zh_CN","zh_CN_default","a","isEdit","formLayout","sourceEmail","info","uname","telephone","icon","enable","hideMessage","headers","authorization","moment","moment_default","encrypt","handleVaild","handleSubmit","$refs","vaildModal","valid","$message","loading","setTimeout","$router","go","handleEdit","v","test","handleChangeAvatar","avatar","click","changeAvatar","formData","window","FormData","append","document","querySelector","files","created","_this3","push","filters","typeFilter","statusFilter","user_UserInfomation","_vm","locale","busered","bordered","staticClass","_v","staticStyle","margin-top","justify","align","model","$$v","$set","_s","maxlength","disabled","_f","margin-bottom","shape","size","src","ref","hidden","change","_e","vaild","UserInfomation_Component","UserInfomation_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.f9f68e4458d12bba4e45.js","sourcesContent":["<template>\r\n  <div>\r\n    <a-modal\r\n      title=\"验证邮箱\"\r\n      cancelText=\"取消\"\r\n      okText=\"验证\"\r\n      :visible=\"visible\"\r\n      @ok=\"handleOk\"\r\n      @cancel=\"handleCancel\"\r\n      :confirmLoading=\"confirmLoading\"\r\n    >\r\n      <a-form :form=\"form\" >\r\n        <a-form-item\r\n        :wrapper-col=\"{ span: 20 }\"\r\n        has-feedback\r\n        >\r\n          <a-input\r\n          type=\"text\" \r\n          placeholder=\"验证码\" \r\n          v-decorator=\"['captcha', {rules: [{ required: true, message: ' ' },{ validator: this.handleValidCaptcha }], validateTrigger: ['change', 'blur']}]\"\r\n          />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { errorTipsMap } from '@/utils/errorTips'\r\nimport { sendCaptcha, validEmailFunction } from '@/api/login'\r\nexport default {\r\n  name:'VaildEmail',\r\n  data(){\r\n    return{\r\n      email:'111',\r\n      captchaInfo:{\r\n        code:'',\r\n        token:''\r\n      },\r\n      form: this.$form.createForm(this),\r\n      visible:false,\r\n      confirmLoading:false,\r\n    }\r\n  },\r\n  methods:{\r\n    show(email){\r\n      this.getCaptcha (email)\r\n      this.email=email\r\n      this.visible=true\r\n    },\r\n    handleOk(){\r\n      this.form.validateFields({ force: true }, (errors, values) => {\r\n        if (errors) {\r\n          console.log('VaildEmail.form.validateFields',errors)\r\n          return\r\n        }\r\n        this.captchaInfo.code=values.captcha\r\n        this.confirmLoading = true\r\n\r\n        validEmailFunction(this.captchaInfo).then(res => {\r\n          this.confirmLoading=false\r\n          if (res.success === true) {\r\n            this.$notification.success({message: '邮箱验证通过'})\r\n            this.visible=false\r\n            this.form.resetFields()\r\n            this.$emit('vaild')\r\n            return\r\n          }\r\n          this.$notification.error({message: errorTipsMap[res.data]})\r\n        }).catch(ex => {\r\n          confirmLoading=false\r\n          this.$notification.error({message: '请求出现错误，请稍后再试'})\r\n          console.log('updateInfo error',ex.message)\r\n        })\r\n      });\r\n    },\r\n    handleCancel(){\r\n      this.visible=false\r\n      this.captchaInfo.code=''\r\n      this.form.resetFields()\r\n    },\r\n    getCaptcha (email) {\r\n      return sendCaptcha(email).then(res => {\r\n        if (res.success === true) {\r\n          this.visible=true\r\n          this.captchaInfo=res.data\r\n          //alert(res.data.code)\r\n          this.$notification.success({message: `验证码已发送到邮箱: ${email}`})\r\n          return\r\n        }\r\n        this.$notification.error({message: `验证码发送失败: ${errorTipsMap[res.data]}`})\r\n      }).catch(ex => {\r\n        console.log('请求出现错误，请稍后再试',ex.message)\r\n        this.$notification.error({message:'请求出现错误，请稍后再试'})\r\n      })\r\n    },\r\n    handleValidCaptcha(rule, value, callback){  //  验证验证码\r\n      if (undefined===value) {\r\n        callback('请输入验证码')\r\n      }\r\n      if(4!=value.length){\r\n        callback('请输入4位验证码')\r\n      }\r\n      if(value!==this.captchaInfo.code){\r\n        callback('验证码不正确')\r\n      }\r\n      callback()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/VaildEmail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-modal',{attrs:{\"title\":\"验证邮箱\",\"cancelText\":\"取消\",\"okText\":\"验证\",\"visible\":_vm.visible,\"confirmLoading\":_vm.confirmLoading},on:{\"ok\":_vm.handleOk,\"cancel\":_vm.handleCancel}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',{attrs:{\"wrapper-col\":{ span: 20 },\"has-feedback\":\"\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['captcha', {rules: [{ required: true, message: ' ' },{ validator: this.handleValidCaptcha }], validateTrigger: ['change', 'blur']}]),expression:\"['captcha', {rules: [{ required: true, message: ' ' },{ validator: this.handleValidCaptcha }], validateTrigger: ['change', 'blur']}]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"验证码\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7c16efdf\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/VaildEmail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7c16efdf\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./VaildEmail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./VaildEmail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./VaildEmail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7c16efdf\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./VaildEmail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7c16efdf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/VaildEmail.vue\n// module id = null\n// module chunks = ","<template>\r\n<a-locale-provider :locale=\"zh_CN\">\r\n  <a-card :busered=\"false\" :bordered=\"false\">\r\n    <div class=\"main\">\r\n      <div class=\"tit\">\r\n        <h4>基本信息</h4>\r\n      </div>\r\n          <div class=\"section\">\r\n        <a-row type=\"flex\" justify=\"space-around\" align=\"middle\" style=\"margin-top:50px;\">\r\n          <a-col :span=\"16\">\r\n            <a-row>\r\n              <a-col :span=\"4\" class=\"label-name\">用户名:</a-col>\r\n              <a-col :span=\"16\">\r\n                <p v-if=\"!isEdit\" style=\"margin-top:4px\">{{ info.uname }}</p>\r\n                <a-input v-else placeholder=\"用户名\" v-model=\"info.uname\"/>\r\n              </a-col>\r\n            </a-row>\r\n            <a-row style=\"margin-top:15px;\">\r\n              <a-col :span=\"4\" class=\"label-name\">邮箱：</a-col>\r\n              <a-col :span=\"16\">\r\n                <p v-if=\"!isEdit\" style=\"margin-top:4px\">{{ info.email }}</p>\r\n                <a-input v-else placeholder=\"邮箱\" v-model=\"info.email\" maxlength=\"18\"/>\r\n              </a-col>\r\n            </a-row>\r\n            <a-row style=\"margin-top:15px;\">\r\n              <a-col :span=\"4\" class=\"label-name\">手机：</a-col>\r\n              <a-col :span=\"16\">\r\n                <p v-if=\"!isEdit\" style=\"margin-top:4px\">{{ info.telephone }}</p>\r\n                <a-input v-else placeholder=\"仅大陆手机号码\" v-model=\"info.telephone\" maxlength=\"11\"/>\r\n              </a-col>\r\n            </a-row>\r\n            <a-row style=\"margin-top:15px;\">   \r\n              <a-col :span=\"4\" class=\"label-name\">账号类型：</a-col>\r\n              <a-col :span=\"16\">\r\n                <p v-if=\"!isEdit\" style=\"margin-top:4px\">{{ info.type|typeFilter }}</p>\r\n                <a-input v-else :disabled=\"true\" placeholder=\"账号类型\"/>\r\n              </a-col>\r\n            </a-row>\r\n            <a-row style=\"margin-top:15px;\">   \r\n              <a-col :span=\"4\" class=\"label-name\">账号状态：</a-col>\r\n              <a-col :span=\"16\">\r\n                <p v-if=\"!isEdit\" style=\"margin-top:4px\">{{ info.enable|statusFilter }}</p>\r\n                <a-input v-else :disabled=\"true\" placeholder=\"账号状态\"/>\r\n              </a-col>\r\n            </a-row>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-row style=\"margin-top:50px;margin-bottom:20px;\" type=\"flex\" justify=\"space-around\" align=\"middle\">\r\n              <a-avatar shape=\"square\" :size=\"128\" icon=\"user\" :src=\"info.icon\"/>\r\n              <!-- <a-avatar shape=\"square\" :size=\"128\" icon=\"user\" :src=\"'/api'+info.icon\"/> -->\r\n            </a-row>\r\n            <a-row v-if=\"isEdit\" type=\"flex\" justify=\"space-around\" align=\"middle\">\r\n              <input type=\"file\" class=\"file\" hidden=\"hidden\" @change=\"changeAvatar\" ref=\"avatar\"/>\r\n                <a-button @click=\"handleChangeAvatar\">\r\n                  <a-icon type=\"upload\" /> 修改头像\r\n                </a-button>\r\n            </a-row>\r\n          </a-col>\r\n        </a-row>\r\n        <div class=\"btn-box\">\r\n          <a-button v-if=\"isEdit\" class=\"btn\" @click=\"handleCancel\">取消</a-button>\r\n          <a-button v-if=\"isEdit\" class=\"btn\" type=\"primary\" @click=\"handleVaild\">保存</a-button>\r\n          <a-button v-else class=\"btn\" type=\"primary\" @click=\"handleEdit\">编辑</a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <vaild-email ref=\"vaildModal\" @vaild=\"handleSubmit\" />\r\n  </a-card>\r\n</a-locale-provider>\r\n</template>\r\n\r\n<script>\r\nimport zh_CN from 'ant-design-vue/lib/locale-provider/zh_CN';\r\nimport moment from 'moment';\r\nimport { user_info, setUserInfo } from '@/utils/encrypt'\r\nimport { errorTipsMap } from '@/utils/errorTips'\r\nimport { isLogin, logout, updateInfo, updateAvatar, validEmailFunction } from '@/api/login'\r\nimport VaildEmail from './VaildEmail'\r\nconst userTypeMap = {\r\n  '0': {\r\n    text: '普通用户'\r\n  },\r\n  '1': {\r\n    text: '管理员'\r\n  }\r\n}\r\nconst userStatusMap = {\r\n  true: {\r\n    text: '启用'\r\n  },\r\n  false: {\r\n    text: '停用'\r\n  }\r\n}\r\nexport default {\r\n name: 'UserInfomation',\r\n  components: {\r\n    VaildEmail\r\n  },\r\n data () {\r\n  return {\r\n    zh_CN,\r\n    isEdit: false,\r\n    formLayout: 'horizontal',\r\n    sourceEmail:'',\r\n    info: {\r\n      uname: '',\r\n      telephone: '',\r\n      email: '',\r\n      type: 0,\r\n      icon: '/upload/user/avatar/default_avatar.jpeg',\r\n      enable: true\r\n    },\r\n    hideMessage:0,\r\n    headers: {\r\n      authorization: 'authorization-text',\r\n    }\r\n  };\r\n },\r\n  methods: {\r\n    moment,\r\n    handleCancel: function() {\r\n      this.info=user_info\r\n      this.isEdit = false\r\n    },\r\n    handleVaild(){\r\n      if(this.sourceEmail!==this.info.email){\r\n        this.$refs.vaildModal.show(this.info.email)\r\n        return\r\n      }\r\n      this.handleSubmit()\r\n    },\r\n    handleSubmit () {\r\n      if(this.valid()){\r\n        this.hideMessage = this.$message.loading('保存中...', 0);\r\n\r\n        updateInfo(this.info).then(res => {\r\n          setTimeout(this.hideMessage)\r\n          if (res.success === true) {\r\n            setUserInfo(this.info)\r\n            this.sourceEmail=this.info.email\r\n            this.$notification.success({message: '用户信息已更新'})\r\n            this.isEdit = false\r\n            this.$router.go(0)\r\n            return\r\n          }\r\n          this.$notification.error({message: errorTipsMap[res.data]})\r\n        }).catch(ex => {\r\n          setTimeout(this.hideMessage)\r\n          this.$notification.error({message: '请求出现错误，请稍后再试'})\r\n          console.log('updateInfo error',ex.message)\r\n        })\r\n      }\r\n    },\r\n    handleEdit: function() {\r\n      this.isEdit = true\r\n    },\r\n    valid(){\r\n      let v=true\r\n      if(!/^[A-Za-z][a-zA-Z0-9_]{5,15}$/.test(this.info.uname)){\r\n        this.$notification.error({message: '用户名为6到16位（字母，数字，下划线）只能以字母开头!'})\r\n        v=false\r\n      }\r\n      if(!/^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/.test(this.info.email)){\r\n        this.$notification.error({message: '邮箱格式不正确!'})\r\n        v=false\r\n      }\r\n      if(!/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\d{8}$/.test(this.info.telephone)){\r\n        this.$notification.error({message: '手机号格式不正确!'})\r\n        v=false\r\n      }\r\n      return v\r\n    },\r\n    handleChangeAvatar(){\r\n      console.log(this.$refs.avatar)\r\n      this.$refs.avatar.click()\r\n    },\r\n    changeAvatar() {\r\n      if(!/(\\.*.jpg$)|(\\.*.png$)|(\\.*.jpeg$)|(\\.*.gif$)|(\\.*.bmp$)/.test(this.$refs.avatar.value)){\r\n        this.$notification.error({message: '仅支持jpg/jpeg/png/gif/bmp格式的头像！'})\r\n        return\r\n      }\r\n      let formData = new window.FormData()\r\n      formData.append('multipartFile', document.querySelector('input[type=file]').files[0])\r\n      updateAvatar(formData).then(res => {\r\n        if (res.success === true) {\r\n          this.$notification.success({message: '头像更新成功'})\r\n          this.$router.go(0)\r\n          return\r\n        }\r\n        this.$notification.error({message: errorTipsMap[res.data]})\r\n      }).catch(ex => {\r\n        setTimeout(this.hideMessage)\r\n        this.$notification.error({message: '请求出现错误，请稍后再试'})\r\n        console.log('updateInfo error',ex.message)\r\n      })\r\n    },\r\n  },\r\n  created () {\r\n    if(null!==user_info){\r\n      this.info=user_info\r\n      this.sourceEmail=user_info.email\r\n      return\r\n    }\r\n    isLogin().then(res => {\r\n      if (res.success === true) {\r\n        this.info=res.data\r\n        setUserInfo(res.data)\r\n        this.sourceEmail=res.data.email\r\n        return\r\n      }\r\n      console.log('isLogin error',errorTipsMap[res.data])\r\n      this.info=null\r\n      this.$router.push('/login')\r\n    }).catch(ex => {\r\n      console.log('isLogin error',ex.message)\r\n    })\r\n  },\r\n  filters: {\r\n    typeFilter (type) {\r\n      return userTypeMap[type].text\r\n    },\r\n    statusFilter (type) {\r\n      return userStatusMap[type].text\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n.main {\r\n  float: left;\r\n  margin-left: 20px;\r\n  width: 100%;\r\n  padding: 20px 40px 40px;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.tit {\r\n  padding-bottom: 45px;\r\n  border-bottom: 1px solid #c9c9c9;\r\n}\r\n\r\n.tit h4 {\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n  color: #333;\r\n  float: left;\r\n}\r\n\r\n.section {\r\n  padding-top: 10px;\r\n}\r\n\r\n.section li {\r\n  color: #666;\r\n  padding-top: 10px;\r\n  height: 30px;\r\n  padding-left: 120px;\r\n  position: relative;\r\n  list-style-type: none;\r\n  margin-top: 20px;\r\n}\r\n\r\n.section li label {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 10px;\r\n  line-height: 30px;\r\n  color: #999;\r\n  width: 100px;\r\n  text-align: right;\r\n  margin-right: 15px;\r\n}\r\n\r\n.section li p {\r\n  display: inline-block;\r\n  color: #333;\r\n  font-size: 14px;\r\n  line-height: 30px;\r\n}\r\n\r\n.section .btn-box {\r\n  margin-top: 40px;\r\n  width: 42%;\r\n}\r\n\r\n.section .btn-box .btn {\r\n  float: right;\r\n  margin-left: 10px;\r\n}\r\n\r\n.label-name{\r\n  margin-top:5px;\r\n  margin-right:5px;\r\n  text-align:right;\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/user/UserInfomation.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-locale-provider',{attrs:{\"locale\":_vm.zh_CN}},[_c('a-card',{attrs:{\"busered\":false,\"bordered\":false}},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"tit\"},[_c('h4',[_vm._v(\"基本信息\")])]),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_c('a-row',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"type\":\"flex\",\"justify\":\"space-around\",\"align\":\"middle\"}},[_c('a-col',{attrs:{\"span\":16}},[_c('a-row',[_c('a-col',{staticClass:\"label-name\",attrs:{\"span\":4}},[_vm._v(\"用户名:\")]),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":16}},[(!_vm.isEdit)?_c('p',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(_vm._s(_vm.info.uname))]):_c('a-input',{attrs:{\"placeholder\":\"用户名\"},model:{value:(_vm.info.uname),callback:function ($$v) {_vm.$set(_vm.info, \"uname\", $$v)},expression:\"info.uname\"}})],1)],1),_vm._v(\" \"),_c('a-row',{staticStyle:{\"margin-top\":\"15px\"}},[_c('a-col',{staticClass:\"label-name\",attrs:{\"span\":4}},[_vm._v(\"邮箱：\")]),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":16}},[(!_vm.isEdit)?_c('p',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(_vm._s(_vm.info.email))]):_c('a-input',{attrs:{\"placeholder\":\"邮箱\",\"maxlength\":\"18\"},model:{value:(_vm.info.email),callback:function ($$v) {_vm.$set(_vm.info, \"email\", $$v)},expression:\"info.email\"}})],1)],1),_vm._v(\" \"),_c('a-row',{staticStyle:{\"margin-top\":\"15px\"}},[_c('a-col',{staticClass:\"label-name\",attrs:{\"span\":4}},[_vm._v(\"手机：\")]),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":16}},[(!_vm.isEdit)?_c('p',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(_vm._s(_vm.info.telephone))]):_c('a-input',{attrs:{\"placeholder\":\"仅大陆手机号码\",\"maxlength\":\"11\"},model:{value:(_vm.info.telephone),callback:function ($$v) {_vm.$set(_vm.info, \"telephone\", $$v)},expression:\"info.telephone\"}})],1)],1),_vm._v(\" \"),_c('a-row',{staticStyle:{\"margin-top\":\"15px\"}},[_c('a-col',{staticClass:\"label-name\",attrs:{\"span\":4}},[_vm._v(\"账号类型：\")]),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":16}},[(!_vm.isEdit)?_c('p',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(_vm._s(_vm._f(\"typeFilter\")(_vm.info.type)))]):_c('a-input',{attrs:{\"disabled\":true,\"placeholder\":\"账号类型\"}})],1)],1),_vm._v(\" \"),_c('a-row',{staticStyle:{\"margin-top\":\"15px\"}},[_c('a-col',{staticClass:\"label-name\",attrs:{\"span\":4}},[_vm._v(\"账号状态：\")]),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":16}},[(!_vm.isEdit)?_c('p',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(_vm._s(_vm._f(\"statusFilter\")(_vm.info.enable)))]):_c('a-input',{attrs:{\"disabled\":true,\"placeholder\":\"账号状态\"}})],1)],1)],1),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":8}},[_c('a-row',{staticStyle:{\"margin-top\":\"50px\",\"margin-bottom\":\"20px\"},attrs:{\"type\":\"flex\",\"justify\":\"space-around\",\"align\":\"middle\"}},[_c('a-avatar',{attrs:{\"shape\":\"square\",\"size\":128,\"icon\":\"user\",\"src\":_vm.info.icon}})],1),_vm._v(\" \"),(_vm.isEdit)?_c('a-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-around\",\"align\":\"middle\"}},[_c('input',{ref:\"avatar\",staticClass:\"file\",attrs:{\"type\":\"file\",\"hidden\":\"hidden\"},on:{\"change\":_vm.changeAvatar}}),_vm._v(\" \"),_c('a-button',{on:{\"click\":_vm.handleChangeAvatar}},[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 修改头像\\r\\n                \")],1)],1):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[(_vm.isEdit)?_c('a-button',{staticClass:\"btn\",on:{\"click\":_vm.handleCancel}},[_vm._v(\"取消\")]):_vm._e(),_vm._v(\" \"),(_vm.isEdit)?_c('a-button',{staticClass:\"btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleVaild}},[_vm._v(\"保存\")]):_c('a-button',{staticClass:\"btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleEdit}},[_vm._v(\"编辑\")])],1)],1)]),_vm._v(\" \"),_c('vaild-email',{ref:\"vaildModal\",on:{\"vaild\":_vm.handleSubmit}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c67e4350\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/UserInfomation.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c67e4350\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserInfomation.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserInfomation.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserInfomation.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c67e4350\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserInfomation.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c67e4350\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/UserInfomation.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}