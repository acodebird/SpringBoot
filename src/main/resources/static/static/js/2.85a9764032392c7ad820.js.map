{"version":3,"sources":["webpack:///./src/api/room.js","webpack:///src/views/admin/form/RoomEdit.vue","webpack:///./src/views/admin/form/RoomEdit.vue?91ff","webpack:///./src/views/admin/form/RoomEdit.vue","webpack:///src/views/admin/form/RoomAdd.vue","webpack:///./src/views/admin/form/RoomAdd.vue?42c0","webpack:///./src/views/admin/form/RoomAdd.vue","webpack:///src/views/admin/RoomManage.vue","webpack:///./src/views/admin/RoomManage.vue?6425","webpack:///./src/views/admin/RoomManage.vue","webpack:///./src/api/upload.js"],"names":["api","room","updateRoom","parameter","axios","url","rid","method","data","RoomEdit","name","props","record","type","Object","String","default","labelCol","xs","span","sm","wrapperCol","visible","confirmLoading","form","this","$form","createForm","previewVisible","previewImage","fileList","isUpload","components","computed","methods","handleCancel","defaultService","defaultFacilities","edit","setFieldsValue","formData","lodash_pick_default","$nextTick","rname","people","assitions","price","cancel","breakfast","stock","img","file","uid","status","push","handleData","directoryName","handleCancelUploadImg","handlePreview","thumbUrl","handleChange","_ref","response","imgUrl","handleRemove","_this","filePath","undefined","substring","upload","then","res","success","$message","error","catch","err","message","handleSubmit","_this2","validateFields","errors","values","length","$emit","handleCheckStock","rule","value","callback","test","handleCheckPrice","form_RoomEdit","render","_vm","_h","$createElement","_c","_self","attrs","title","width","on","ok","spinning","label","directives","rawName","rules","required","expression","_v","action","listType","remove","preview","change","staticClass","_e","footer","staticStyle","alt","src","placeholder","autosize","initialValue","validator","staticRenderFns","admin_form_RoomEdit","__webpack_require__","normalizeComponent","ssrContext","RoomAdd","loading","hid","add","resetFields","console","log","addRoom","form_RoomAdd","admin_form_RoomAdd","RoomAdd_normalizeComponent","roomTypeMap","STANDARD","text","SUPERIOR","DELUXE","BUSINESS","RoomManage","STable","Table","Ellipsis","filters","typeFilter","h","zh_CN","zh_CN_default","a","columns","dataIndex","align","customRender","style","scopedSlots","loadData","params","getRoomList","extends_default","sortField","pageable","ex","$route","selectedRowKeys","optionAlertShow","onSelectChange","handleOk","$refs","table","refresh","handleEdit","editModal","handleDelete","id","deleteRoom","$notification","handleDeleteAll","_this3","warning","ids","join","handleAdd","addModal","admin_RoomManage","locale","to","fontSize","margin-bottom","okText","cancelText","confirm","click","ref","size","rowKey","rowSelection","onChange","showPagination","_u","key","fn","tooltip","_s","_f","$event","color","RoomManage_Component","RoomManage_normalizeComponent","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__utils_request__"],"mappings":"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","file":"static/js/2.85a9764032392c7ad820.js","sourcesContent":["import {\r\n    axios\r\n  } from '@/utils/request'\r\n  \r\nconst api = {\r\n    //room: '/api/roomManage'\r\n    room: '/roomManage'\r\n}\r\n// 获取房间列表 parameter: { pageSize: 10, pageNo: 1 }\r\nexport function getRoomList (parameter) {\r\n    return axios({\r\n        url: api.room,\r\n        method: 'get',\r\n        params: parameter\r\n    })\r\n}\r\n// 根据id删除房间 id\r\nexport function deleteRoom (id) {\r\n    return axios({\r\n        url: `${api.room}/${id}`,\r\n        method: 'delete'\r\n    })\r\n}\r\n// 批量删除房间 parameter: { ids }\r\nexport function deleteRoomAll (parameter) {\r\n    return axios({\r\n        url: `${api.room}`,\r\n        method: 'delete',\r\n        params: parameter\r\n    })\r\n}\r\n//添加房间 parameter: {...Room}\r\nexport function addRoom (parameter) {\r\n    return axios({\r\n        url: `${api.room}/${parameter.hid}`,\r\n        method: 'post',\r\n        data: parameter\r\n    })\r\n}\r\n//更新房间信息\r\nexport function updateRoom (parameter) {\r\n    return axios({\r\n        url: `${api.room}/${parameter.rid}`,\r\n        method: 'put',\r\n        data: parameter\r\n    })\r\n}\r\n\r\n/*-----------------------------------------------------------------------*/\r\n\r\n//获取房间详细信息\r\nexport function getRoomDetail (id) {\r\n    return axios({\r\n        url: `${api.room}/${id}`,\r\n        method: 'get'\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/room.js","<!--编辑房间-->\r\n<template>\r\n <div>\r\n    <!--\r\n        visible:是否显示当前a-modal\r\n        confirmLoading:加载动画效果\r\n         @ok=\"handleSubmit\"         提交表单数据给后台\r\n         @cancel=\"handleCancel\"     this.visible=false\r\n    -->\r\n    <a-modal\r\n      title=\"编辑房间\"\r\n      :width=\"640\"\r\n      :visible=\"visible\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      @ok=\"handleSubmit\"\r\n      @cancel=\"handleCancel\"\r\n    >\r\n      <a-spin :spinning=\"confirmLoading\">\r\n        <a-form :form=\"form\">\r\n          <a-form-item label=\"房间名字\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['rname',\r\n            {rules: [{required: true, message: '请输入房间名字'}]}]\"></a-input>\r\n          </a-form-item>\r\n          <!-- action=\"/api/upload\" -->\r\n          <a-form-item label=\"房间图片\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-upload\r\n            action=\"/upload\"\r\n            :data=\"handleData\"\r\n            listType=\"picture-card\"\r\n            :fileList=\"fileList\"\r\n            @preview=\"handlePreview\"\r\n            @change=\"handleChange\"\r\n            :remove=\"handleRemove\"\r\n            >\r\n            <div v-if=\"fileList.length < 1\">\r\n                <a-icon type=\"plus\" />\r\n                <div class=\"ant-upload-text\">Upload</div>\r\n            </div>\r\n            </a-upload>\r\n            <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancelUploadImg\">\r\n                <img alt=\"房间图片\" style=\"width: 100%\" :src=\"previewImage\" />\r\n            </a-modal>\r\n            <span v-show=\"isUpload\" class=\"uploadValidator\">请上传图片</span>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间详情\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-textarea placeholder=\"房间详情\"\r\n            v-decorator=\"['assitions',\r\n            {rules: [{required: true, message: '请输入房间详情'}]}]\" autosize />\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"人数上限\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['people',\r\n            {initialValue: 'people',rules: [{required: true, message: '请选择人数上限'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"1\">1</a-select-option>\r\n              <a-select-option value=\"2\">2</a-select-option>\r\n              <a-select-option value=\"3\">3</a-select-option>\r\n              <a-select-option value=\"4\">4</a-select-option>\r\n              <a-select-option value=\"5\">5</a-select-option>\r\n              <a-select-option value=\"6\">6</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"取消策略\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['cancel',\r\n            {initialValue: 'cancel',rules: [{required: true, message: '请选择取消策略'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"限时取消\">限时取消</a-select-option>\r\n              <a-select-option value=\"免费取消\">免费取消</a-select-option>\r\n              <a-select-option value=\"不支持取消\">不支持取消</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间早餐\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['breakfast',\r\n            {initialValue: 'breakfast',rules: [{required: true, message: '请选择房间早餐'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"含早\">含早</a-select-option>\r\n              <a-select-option value=\"不含早\">不含早</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间价格\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['price',\r\n            {rules: [{required: true, message: '请输入房间价格'},{validator: handleCheckPrice}]}]\"></a-input>\r\n          </a-form-item>\r\n\r\n           <a-form-item label=\"房间库存\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['stock',\r\n            {rules: [{required: true, message: '请输入房间库存'},{validator: handleCheckStock}]}]\"></a-input>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间类型\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['type', \r\n            {initialValue: 'type',rules: [{required: true, message: '请选择房间类型'}]}]\" \r\n            placeholder=\"请选择\">\r\n              <a-select-option value=\"STANDARD\">标准房</a-select-option>\r\n              <a-select-option value=\"SUPERIOR\">高级房</a-select-option>\r\n              <a-select-option value=\"DELUXE\">豪华房</a-select-option>\r\n              <a-select-option value=\"BUSINESS\">商务房</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-spin>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport pick from 'lodash.pick' //https://blog.csdn.net/suwu150/article/details/75250749\r\nimport { uploadImg, deleteFile } from '@/api/upload'\r\nimport { updateRoom } from '@/api/room'\r\n\r\nexport default {\r\n name: 'RoomEdit',\r\n props: {\r\n    record: {\r\n      type: [Object, String],\r\n      default: ''\r\n    }\r\n  },\r\n data () {\r\n    return {\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 7 }\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 13 }\r\n      },\r\n      visible: false,\r\n      confirmLoading: false,\r\n      form: this.$form.createForm(this),\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [],\r\n      isUpload: false,\r\n      rid: ''\r\n   };\r\n },\r\n\r\n components: {},\r\n\r\n computed: {},\r\n\r\n methods: {\r\n   handleCancel() {\r\n        //关闭酒店编辑框\r\n        this.visible = false\r\n        //清除上次编辑的数据\r\n        this.isUpload = false\r\n        this.defaultService = []\r\n        this.defaultFacilities = []\r\n        this.fileList = []\r\n    },\r\n    edit(record) {\r\n        //显示编辑框\r\n        this.visible = true\r\n        //通过pick获取编辑record记录需要填充到表单的数据字段\r\n        //注意：setFieldsValue(formData) 填充的数据必须和表单中的 输入元素必须一致\r\n        const {\r\n            form: { setFieldsValue }\r\n        } = this\r\n        const formData = pick(record, \r\n            ['rid', 'rname', 'people', 'assitions', 'cancel', 'breakfast', 'price', 'stock', 'img', 'type']\r\n        )\r\n        this.rid = formData.rid\r\n        this.$nextTick(() => {\r\n            setFieldsValue({\r\n            'rname': formData.rname,\r\n            'people': formData.people,\r\n            'assitions': formData.assitions,\r\n            'price': formData.price,\r\n            'cancel': formData.cancel,\r\n            'breakfast': formData.breakfast,\r\n            'stock': formData.stock,\r\n            'type': formData.type\r\n            })\r\n        })\r\n        if(formData.img != null && formData.img != \"\"){\r\n            let file = {\r\n                uid: '-1',\r\n                name: '房间图片',\r\n                status: 'done',\r\n                url: `${formData.img}`,\r\n                /* url: `/api${formData.img}`, */\r\n            }\r\n            this.fileList.push(file)\r\n        }\r\n    },\r\n    /*-----------文件上传相关函数--------------*/\r\n    handleData() {\r\n        //console.log(`设置文件上传参数`)\r\n        return {\r\n            directoryName: \"room\",\r\n        }\r\n    },\r\n    handleCancelUploadImg() {\r\n        //console.log('关闭图片预览')\r\n        this.previewVisible = false;\r\n    },\r\n    handlePreview(file) {\r\n        //图片预览\r\n        //console.log(`图片路径:${file.response.data.imgUrl}`)\r\n        this.previewImage = file.url || file.thumbUrl;\r\n        this.previewVisible = true;\r\n    },\r\n    handleChange({ file,fileList }) {\r\n        //上传文件列表改变时更新本地文件列表\r\n        /* console.log(JSON.stringify(file)); // file 是当前正在上传的 单个 img\r\n        console.log(JSON.stringify(fileList)); // fileList 是已上传的全部 img 列表 */\r\n        this.fileList = fileList;\r\n        //文件上传成功更新数据库中酒店图片路径\r\n        if(file.status == \"done\") {\r\n            this.isUpload = false\r\n            updateRoom({'rid': this.rid, 'img': this.fileList[0].response.data.imgUrl}) //更新房间图片\r\n        }\r\n    },\r\n    handleRemove(file) {\r\n        //返回值为false不删除文件，true时删除文件\r\n        /* if(file == undefined || file.response.data == undefined || file.response.data.imgUrl == \"\") {\r\n            this.$message.error(`文件不存在！`)\r\n            return false\r\n        } */\r\n        let filePath = file.response != undefined ? file.response.data.imgUrl : this.fileList[0].url.substring(4);\r\n        deleteFile({\"filePath\" : filePath}).then(res => {\r\n            if(res.success === true){\r\n                updateRoom({'rid': this.rid, 'img': ''}) //更新房间图片\r\n                this.$message.success(`文件删除成功！`)\r\n                return true;\r\n            }else{\r\n                this.$message.error(`文件删除失败！`)\r\n                return false;\r\n            }\r\n        }).catch(err => {\r\n            this.$message.error(`文件删除出错！: ${err.message}`)\r\n        })\r\n    },\r\n    /*-----------文件上传相关函数结束--------------*/\r\n    handleSubmit() {\r\n        const {\r\n        form: { validateFields }\r\n      } = this\r\n      this.confirmLoading = true\r\n      validateFields((errors, values) => {\r\n        this.isUpload = this.fileList.length==0\r\n        if (!errors && !this.isUpload) {\r\n          let imgUrl = this.fileList[0].response != undefined ? this.fileList[0].response.data.imgUrl : this.fileList[0].url.substring(4)\r\n          let parameter = {\r\n            'rid': this.rid,\r\n            'rname': values.rname,\r\n            'people': values.people,\r\n            'assitions': values.assitions,\r\n            'cancel': values.cancel,\r\n            'breakfast': values.breakfast,\r\n            'price': values.price,\r\n            'stock': values.stock,\r\n            'type': values.type,\r\n            'img': imgUrl\r\n          }\r\n          return updateRoom(parameter).then(res => {\r\n            if (res.success === true) {\r\n              this.visible = false\r\n              this.confirmLoading = false\r\n              this.$emit('ok', values)\r\n              this.$message.success('更新房间成功！')\r\n            } else {\r\n              this.confirmLoading = false\r\n              this.$message.error({\r\n                message: '更新房间失败！'\r\n              })\r\n            }\r\n          }).catch(err => {\r\n              this.confirmLoading = false\r\n              this.$message.error(`更新房间出错！: ${err.message}`)\r\n          }) \r\n        } else {\r\n            this.confirmLoading = false\r\n        }\r\n      })\r\n    },\r\n    /* 自定义验证规则 */\r\n    handleCheckStock(rule, value, callback) {\r\n      //验证库存只能为非负整数\r\n      if (value!=\"\" && (!(/^\\d+$/.test(value)))) {\r\n        callback('请输入正确的库存')\r\n      }\r\n      callback()\r\n    },\r\n    handleCheckPrice(rule, value, callback) {\r\n      //验证价格只能为非负浮点数\r\n      if (value!=\"\" && (!(/^\\d+(\\.\\d+)?$/.test(value)))) {\r\n        callback('请输入正确的的价格')\r\n      }\r\n      callback()\r\n    }\r\n }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .ant-upload-select-picture-card i {\r\n    font-size: 32px;\r\n    color: #999;\r\n  }\r\n\r\n  .ant-upload-select-picture-card .ant-upload-text {\r\n    margin-top: 8px;\r\n    color: #666;\r\n  }\r\n  .uploadValidator {\r\n      color: red;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/admin/form/RoomEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-modal',{attrs:{\"title\":\"编辑房间\",\"width\":640,\"visible\":_vm.visible,\"confirmLoading\":_vm.confirmLoading},on:{\"ok\":_vm.handleSubmit,\"cancel\":_vm.handleCancel}},[_c('a-spin',{attrs:{\"spinning\":_vm.confirmLoading}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',{attrs:{\"label\":\"房间名字\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['rname',\n           {rules: [{required: true, message: '请输入房间名字'}]}]),expression:\"['rname',\\n           {rules: [{required: true, message: '请输入房间名字'}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间图片\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-upload',{attrs:{\"action\":\"/upload\",\"data\":_vm.handleData,\"listType\":\"picture-card\",\"fileList\":_vm.fileList,\"remove\":_vm.handleRemove},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 1)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" \"),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\"Upload\")])],1):_vm._e()]),_vm._v(\" \"),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancelUploadImg}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"房间图片\",\"src\":_vm.previewImage}})]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUpload),expression:\"isUpload\"}],staticClass:\"uploadValidator\"},[_vm._v(\"请上传图片\")])],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间详情\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['assitions',\n           {rules: [{required: true, message: '请输入房间详情'}]}]),expression:\"['assitions',\\n           {rules: [{required: true, message: '请输入房间详情'}]}]\"}],attrs:{\"placeholder\":\"房间详情\",\"autosize\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"人数上限\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['people',\n           {initialValue: 'people',rules: [{required: true, message: '请选择人数上限'}]}]),expression:\"['people',\\n           {initialValue: 'people',rules: [{required: true, message: '请选择人数上限'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"1\"}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"2\"}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"3\"}},[_vm._v(\"3\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"4\"}},[_vm._v(\"4\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"5\"}},[_vm._v(\"5\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"6\"}},[_vm._v(\"6\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"取消策略\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['cancel',\n           {initialValue: 'cancel',rules: [{required: true, message: '请选择取消策略'}]}]),expression:\"['cancel',\\n           {initialValue: 'cancel',rules: [{required: true, message: '请选择取消策略'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"限时取消\"}},[_vm._v(\"限时取消\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"免费取消\"}},[_vm._v(\"免费取消\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"不支持取消\"}},[_vm._v(\"不支持取消\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间早餐\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['breakfast',\n           {initialValue: 'breakfast',rules: [{required: true, message: '请选择房间早餐'}]}]),expression:\"['breakfast',\\n           {initialValue: 'breakfast',rules: [{required: true, message: '请选择房间早餐'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"含早\"}},[_vm._v(\"含早\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"不含早\"}},[_vm._v(\"不含早\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间价格\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['price',\n           {rules: [{required: true, message: '请输入房间价格'},{validator: _vm.handleCheckPrice}]}]),expression:\"['price',\\n           {rules: [{required: true, message: '请输入房间价格'},{validator: handleCheckPrice}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间库存\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['stock',\n           {rules: [{required: true, message: '请输入房间库存'},{validator: _vm.handleCheckStock}]}]),expression:\"['stock',\\n           {rules: [{required: true, message: '请输入房间库存'},{validator: handleCheckStock}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间类型\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['type', \n           {initialValue: 'type',rules: [{required: true, message: '请选择房间类型'}]}]),expression:\"['type', \\n           {initialValue: 'type',rules: [{required: true, message: '请选择房间类型'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"STANDARD\"}},[_vm._v(\"标准房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"SUPERIOR\"}},[_vm._v(\"高级房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"DELUXE\"}},[_vm._v(\"豪华房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"BUSINESS\"}},[_vm._v(\"商务房\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f2712d5a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/form/RoomEdit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f2712d5a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RoomEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f2712d5a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoomEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f2712d5a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/form/RoomEdit.vue\n// module id = null\n// module chunks = ","<!--添加房间-->\r\n<template>\r\n  <div>\r\n    <!--\r\n        visible:是否显示当前a-modal\r\n        confirmLoading:加载动画效果\r\n         @ok=\"handleSubmit\"         提交表单数据给后台\r\n         @cancel=\"handleCancel\"     this.visible=false\r\n    -->\r\n    <a-modal\r\n      title=\"添加房间\"\r\n      :width=\"640\"\r\n      :visible=\"visible\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      @ok=\"handleSubmit\"\r\n      @cancel=\"handleCancel\"\r\n    >\r\n      <a-spin :spinning=\"confirmLoading\">\r\n        <a-form :form=\"form\">\r\n          <a-form-item label=\"房间名字\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['rname',\r\n            {rules: [{required: true, message: '请输入房间名字'}]}]\"></a-input>\r\n          </a-form-item>\r\n          <!-- action=\"/api/upload\" -->\r\n          <a-form-item label=\"房间图片\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-upload\r\n            action=\"/upload\"\r\n            :data=\"handleData\"\r\n            listType=\"picture-card\"\r\n            :fileList=\"fileList\"\r\n            @preview=\"handlePreview\"\r\n            @change=\"handleChange\"\r\n            :remove=\"handleRemove\"\r\n            >\r\n            <div v-if=\"fileList.length < 1\">\r\n                <a-icon type=\"plus\" />\r\n                <div class=\"ant-upload-text\">Upload</div>\r\n            </div>\r\n            </a-upload>\r\n            <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancelUploadImg\">\r\n                <img alt=\"房间图片\" style=\"width: 100%\" :src=\"previewImage\" />\r\n            </a-modal>\r\n            <span v-show=\"isUpload\" class=\"uploadValidator\">请上传图片</span>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间详情\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-textarea placeholder=\"房间详情\"\r\n            v-decorator=\"['assitions',\r\n            {initialValue: assitions, rules: [{required: true, message: '请输入房间详情'}]}]\" autosize />\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"人数上限\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['people',\r\n            {initialValue: '2',rules: [{required: true, message: '请选择人数上限'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"1\">1</a-select-option>\r\n              <a-select-option value=\"2\">2</a-select-option>\r\n              <a-select-option value=\"3\">3</a-select-option>\r\n              <a-select-option value=\"4\">4</a-select-option>\r\n              <a-select-option value=\"5\">5</a-select-option>\r\n              <a-select-option value=\"6\">6</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"取消策略\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['cancel',\r\n            {initialValue: '限时取消',rules: [{required: true, message: '请选择取消策略'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"限时取消\">限时取消</a-select-option>\r\n              <a-select-option value=\"免费取消\">免费取消</a-select-option>\r\n              <a-select-option value=\"不支持取消\">不支持取消</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间早餐\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['breakfast',\r\n            {initialValue: '含早',rules: [{required: true, message: '请选择房间早餐'}]}]\" placeholder=\"请选择\">\r\n              <a-select-option value=\"含早\">含早</a-select-option>\r\n              <a-select-option value=\"不含早\">不含早</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间价格\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['price',\r\n            {rules: [{required: true, message: '请输入房间价格'},{validator: handleCheckPrice}]}]\"></a-input>\r\n          </a-form-item>\r\n\r\n           <a-form-item label=\"房间库存\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['stock',\r\n            {rules: [{required: true, message: '请输入房间库存'},{validator: handleCheckStock}]}]\"></a-input>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"房间类型\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select v-decorator=\"['type', \r\n            {initialValue: 'STANDARD',rules: [{required: true, message: '请选择房间类型'}]}]\" \r\n            placeholder=\"请选择\">\r\n              <a-select-option value=\"STANDARD\">标准房</a-select-option>\r\n              <a-select-option value=\"SUPERIOR\">高级房</a-select-option>\r\n              <a-select-option value=\"DELUXE\">豪华房</a-select-option>\r\n              <a-select-option value=\"BUSINESS\">商务房</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-spin>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { uploadImg, deleteFile } from '@/api/upload'\r\nimport { addRoom } from '@/api/room'\r\n\r\nexport default {\r\n name: 'RoomAdd',\r\n data () {\r\n    return {\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 7 }\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 13 }\r\n      },\r\n      visible: false,\r\n      confirmLoading: false,\r\n      form: this.$form.createForm(this),\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [],\r\n      loading: false,\r\n      isUpload: false,\r\n      assitions: '床型：单床1.8米,面积：12㎡,不允许加床,外窗',\r\n      hid: ''\r\n   };\r\n },\r\n\r\n components: {},\r\n\r\n computed: {},\r\n\r\n methods: {\r\n    add(hid) {\r\n      this.visible = true\r\n      this.form.resetFields()\r\n      //解决每次打开添加房间表单时遗留上次的图片数据和校验提示\r\n      this.fileList = []\r\n      this.isUpload = false\r\n      this.hid = hid\r\n      console.log(`添加房间${hid}`)\r\n    },\r\n    handleCancel() {\r\n      //关闭添加房间表单\r\n      this.visible = false\r\n    },\r\n    handleSubmit() {\r\n      console.log(`添加房间${this.hid}`)\r\n      const {\r\n        form: { validateFields }\r\n      } = this\r\n      this.confirmLoading = true\r\n      validateFields((errors, values) => {\r\n        this.isUpload = this.fileList.length==0\r\n        if (!errors && !this.isUpload) {\r\n          let imgUrl = this.fileList[0].response.data.imgUrl\r\n          let parameter = {\r\n            'rname': values.rname,\r\n            'people': values.people,\r\n            'assitions': values.assitions,\r\n            'cancel': values.cancel,\r\n            'breakfast': values.breakfast,\r\n            'price': values.price,\r\n            'stock': values.stock,\r\n            'type': values.type,\r\n            'img': imgUrl,\r\n            'hid': this.hid\r\n          }\r\n          return addRoom(parameter).then(res => {\r\n            if (res.success === true) {\r\n              this.visible = false\r\n              this.confirmLoading = false\r\n              this.$emit('ok', values)\r\n              this.$message.success('添加房间成功！')\r\n            } else {\r\n              this.confirmLoading = false\r\n              this.$message.error({\r\n                message: '添加房间失败！'\r\n              })\r\n            }\r\n          }).catch(err => {\r\n              this.confirmLoading = false\r\n              this.$message.error(`添加房间出错！: ${err.message}`)\r\n          }) \r\n        } else {\r\n            this.confirmLoading = false\r\n        }\r\n      })\r\n    },\r\n   /*-----------文件上传相关函数--------------*/\r\n    handleData() {\r\n        //console.log(`设置文件上传参数`)\r\n        return {\r\n            directoryName: \"room\",\r\n        }\r\n    },\r\n    handleCancelUploadImg() {\r\n        //console.log('关闭图片预览')\r\n        this.previewVisible = false;\r\n    },\r\n    handlePreview(file) {\r\n        //图片预览\r\n        //console.log(`图片路径:${file.response.data.imgUrl}`)\r\n        this.previewImage = file.url || file.thumbUrl;\r\n        this.previewVisible = true;\r\n    },\r\n    handleChange({ file,fileList }) {\r\n        //上传文件列表改变时更新本地文件列表\r\n        /* console.log(JSON.stringify(file)); // file 是当前正在上传的 单个 img\r\n        console.log(JSON.stringify(fileList)); // fileList 是已上传的全部 img 列表 */\r\n        this.fileList = fileList;\r\n        //文件上传成功更新数据库中酒店图片路径\r\n        if(file.status == \"done\") {\r\n            this.isUpload = false\r\n        }\r\n    },\r\n    handleRemove(file) {\r\n        //返回值为false不删除文件，true时删除文件\r\n        if(file == undefined || file.response.data == undefined || file.response.data.imgUrl == \"\") {\r\n            this.$message.error(`文件不存在！`)\r\n            return false\r\n        }\r\n        let filePath = file.response.data.imgUrl\r\n        deleteFile({\"filePath\" : filePath}).then(res => {\r\n            if(res.success === true){\r\n                this.$message.success(`文件删除成功！`)\r\n                return true;\r\n            }else{\r\n                this.$message.error(`文件删除失败！`)\r\n                return false;\r\n            }\r\n        }).catch(err => {\r\n            this.$message.error(`文件删除出错！: ${err.message}`)\r\n        })\r\n    },\r\n    /*-----------文件上传相关函数结束--------------*/\r\n    /* 自定义验证规则 */\r\n    handleCheckStock(rule, value, callback) {\r\n      //验证库存只能为非负整数\r\n      if (value!=\"\" && (!(/^\\d+$/.test(value)))) {\r\n        callback('请输入正确的库存')\r\n      }\r\n      callback()\r\n    },\r\n    handleCheckPrice(rule, value, callback) {\r\n      //验证价格只能为非负浮点数\r\n      if (value!=\"\" && (!(/^\\d+(\\.\\d+)?$/.test(value)))) {\r\n        callback('请输入正确的的价格')\r\n      }\r\n      callback()\r\n    }\r\n }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .ant-upload-select-picture-card i {\r\n    font-size: 32px;\r\n    color: #999;\r\n  }\r\n\r\n  .ant-upload-select-picture-card .ant-upload-text {\r\n    margin-top: 8px;\r\n    color: #666;\r\n  }\r\n  .uploadValidator {\r\n      color: red;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/admin/form/RoomAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-modal',{attrs:{\"title\":\"添加房间\",\"width\":640,\"visible\":_vm.visible,\"confirmLoading\":_vm.confirmLoading},on:{\"ok\":_vm.handleSubmit,\"cancel\":_vm.handleCancel}},[_c('a-spin',{attrs:{\"spinning\":_vm.confirmLoading}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',{attrs:{\"label\":\"房间名字\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['rname',\n          {rules: [{required: true, message: '请输入房间名字'}]}]),expression:\"['rname',\\n          {rules: [{required: true, message: '请输入房间名字'}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间图片\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-upload',{attrs:{\"action\":\"/upload\",\"data\":_vm.handleData,\"listType\":\"picture-card\",\"fileList\":_vm.fileList,\"remove\":_vm.handleRemove},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 1)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" \"),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\"Upload\")])],1):_vm._e()]),_vm._v(\" \"),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancelUploadImg}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"房间图片\",\"src\":_vm.previewImage}})]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUpload),expression:\"isUpload\"}],staticClass:\"uploadValidator\"},[_vm._v(\"请上传图片\")])],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间详情\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['assitions',\n          {initialValue: _vm.assitions, rules: [{required: true, message: '请输入房间详情'}]}]),expression:\"['assitions',\\n          {initialValue: assitions, rules: [{required: true, message: '请输入房间详情'}]}]\"}],attrs:{\"placeholder\":\"房间详情\",\"autosize\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"人数上限\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['people',\n          {initialValue: '2',rules: [{required: true, message: '请选择人数上限'}]}]),expression:\"['people',\\n          {initialValue: '2',rules: [{required: true, message: '请选择人数上限'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"1\"}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"2\"}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"3\"}},[_vm._v(\"3\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"4\"}},[_vm._v(\"4\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"5\"}},[_vm._v(\"5\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"6\"}},[_vm._v(\"6\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"取消策略\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['cancel',\n          {initialValue: '限时取消',rules: [{required: true, message: '请选择取消策略'}]}]),expression:\"['cancel',\\n          {initialValue: '限时取消',rules: [{required: true, message: '请选择取消策略'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"限时取消\"}},[_vm._v(\"限时取消\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"免费取消\"}},[_vm._v(\"免费取消\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"不支持取消\"}},[_vm._v(\"不支持取消\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间早餐\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['breakfast',\n          {initialValue: '含早',rules: [{required: true, message: '请选择房间早餐'}]}]),expression:\"['breakfast',\\n          {initialValue: '含早',rules: [{required: true, message: '请选择房间早餐'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"含早\"}},[_vm._v(\"含早\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"不含早\"}},[_vm._v(\"不含早\")])],1)],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间价格\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['price',\n          {rules: [{required: true, message: '请输入房间价格'},{validator: _vm.handleCheckPrice}]}]),expression:\"['price',\\n          {rules: [{required: true, message: '请输入房间价格'},{validator: handleCheckPrice}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间库存\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['stock',\n          {rules: [{required: true, message: '请输入房间库存'},{validator: _vm.handleCheckStock}]}]),expression:\"['stock',\\n          {rules: [{required: true, message: '请输入房间库存'},{validator: handleCheckStock}]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"房间类型\",\"labelCol\":_vm.labelCol,\"wrapperCol\":_vm.wrapperCol}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['type', \n          {initialValue: 'STANDARD',rules: [{required: true, message: '请选择房间类型'}]}]),expression:\"['type', \\n          {initialValue: 'STANDARD',rules: [{required: true, message: '请选择房间类型'}]}]\"}],attrs:{\"placeholder\":\"请选择\"}},[_c('a-select-option',{attrs:{\"value\":\"STANDARD\"}},[_vm._v(\"标准房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"SUPERIOR\"}},[_vm._v(\"高级房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"DELUXE\"}},[_vm._v(\"豪华房\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"BUSINESS\"}},[_vm._v(\"商务房\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-80a09bd8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/form/RoomAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-80a09bd8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RoomAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-80a09bd8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoomAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-80a09bd8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/form/RoomAdd.vue\n// module id = null\n// module chunks = ","<!--房型管理-->\r\n<template>\r\n<a-locale-provider :locale=\"zh_CN\">\r\n <div>\r\n   <router-link :to=\"{name: 'HotelManage'}\" title=\"返回酒店管理\">\r\n      <a-icon type=\"rollback\" :style=\"{ fontSize: '30px' }\"/>&nbsp;&nbsp;&nbsp;返回酒店管理\r\n   </router-link><br><br>\r\n\r\n   <div style=\"margin-bottom: 16px\">\r\n     <a-popconfirm title=\"确认删除所选数据?\" okText=\"是\" cancelText=\"否\" @confirm=\"handleDeleteAll\" >\r\n      <a-button type=\"danger\" :loading=\"loading\">\r\n        批量删除\r\n      </a-button>\r\n     </a-popconfirm>\r\n     <a-divider type=\"vertical\" />\r\n     <a-button type=\"primary\" @click=\"handleAdd\">\r\n        添加房间\r\n    </a-button>\r\n   </div>\r\n    <s-table\r\n      ref=\"table\"\r\n      size=\"default\"\r\n      rowKey=\"rid\"\r\n      :columns=\"columns\"\r\n      :data=\"loadData\"\r\n      :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n      showPagination=\"auto\"\r\n    >\r\n      <!-- <span slot=\"img\" slot-scope=\"text\">\r\n        <img style=\"width:100px;heigth:100px\" :src=text />\r\n      </span> -->\r\n      <!--1.较长内容使用ellipsis插件省略显示-->\r\n      <span slot=\"assitions\" slot-scope=\"text\">\r\n        <ellipsis :length=\"30\" tooltip>{{ text }}</ellipsis>\r\n      </span>\r\n      <!-- 2.酒店类型：枚举适配显示 -->\r\n      <span slot=\"type\" slot-scope=\"text\">\r\n        {{text | typeFilter}}\r\n      </span>\r\n      <!-- <span slot=\"createTime\" slot-scope=\"text\">{{ text | moment('YYYY/MM/DD hh:mm:ss') }}</span>\r\n      <span slot=\"orderStatus\" slot-scope=\"text\">\r\n        <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\" />\r\n      </span> -->\r\n      <span slot=\"action\" slot-scope=\"text, record\">\r\n        <template>\r\n          <a @click=\"handleEdit(record)\" title=\"编辑房间\"><a-icon type=\"edit\"/></a>\r\n          <a-divider type=\"vertical\" />\r\n          <a-popconfirm title=\"确认删除数据?\" okText=\"是\" cancelText=\"否\" @confirm=\"handleDelete(record.rid)\" >\r\n           <a style=\"color: red;\" title=\"删除房间\"><a-icon type=\"delete\" /></a>\r\n          </a-popconfirm>\r\n        </template>\r\n      </span>\r\n    </s-table>\r\n    <!-- 使用编辑子组件 ref绑定子组件的名字 -->\r\n    <room-add ref=\"addModal\" @ok=\"handleOk\" />\r\n    <room-edit ref=\"editModal\" @ok=\"handleOk\" />  \r\n </div>\r\n</a-locale-provider>\r\n</template>\r\n\r\n<script>\r\nimport zh_CN from 'ant-design-vue/lib/locale-provider/zh_CN'\r\nimport STable from '@/components/Table'\r\nimport Ellipsis from '@/components/Ellipsis'\r\nimport { parsePage } from '@/utils/pageable'\r\nimport { getRoomList, deleteRoom, deleteRoomAll } from '@/api/room'\r\nimport RoomEdit from './form/RoomEdit'\r\nimport RoomAdd from './form/RoomAdd'\r\n\r\nconst roomTypeMap = {\r\n  STANDARD: {\r\n    text: '标准房'\r\n  },\r\n  SUPERIOR: {\r\n    text: '高级房'\r\n  },\r\n  DELUXE: {\r\n    text: '豪华房'\r\n  },\r\n  BUSINESS: {\r\n    text: '商务房'\r\n  }\r\n}\r\n\r\nexport default {\r\n name: 'RoomManage',\r\n components: {\r\n    STable,\r\n    Ellipsis,\r\n    RoomEdit,\r\n    RoomAdd\r\n },\r\n filters: {\r\n   typeFilter (type) {\r\n     return roomTypeMap[type].text\r\n   }\r\n },\r\n data () {\r\n    return {\r\n      zh_CN,\r\n      columns: [\r\n        {\r\n          title: '主键',\r\n          dataIndex: 'rid',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '图片',\r\n          dataIndex: 'img',\r\n          align: 'center',\r\n          customRender: (text) => {\r\n            /* let url = \"/api\" + text */\r\n            let url = text\r\n            return <img style=\"width:100px;height:80px;\" src={url} />\r\n          },\r\n          //scopedSlots: { customRender: 'img' }\r\n        },\r\n        {\r\n          title: '房间名字',\r\n          dataIndex: 'rname',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '人数上限',\r\n          dataIndex: 'people',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '详情',\r\n          dataIndex: 'assitions',\r\n          align: 'center',\r\n          scopedSlots: { customRender: 'assitions' }\r\n        },\r\n        {\r\n          title: '取消策略',\r\n          dataIndex: 'cancel',\r\n          align: 'center',\r\n        },\r\n        {\r\n          title: '早餐',\r\n          dataIndex: 'breakfast',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '价格（单价：元）',\r\n          dataIndex: 'price',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '库存',\r\n          dataIndex: 'stock',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '类型',\r\n          dataIndex: 'type',\r\n          align: 'center',\r\n          width: '80px',\r\n          scopedSlots: { customRender: 'type' }\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'action',\r\n          align: 'center',\r\n          width: '150px',\r\n          scopedSlots: { customRender: 'action' }\r\n        }\r\n      ],\r\n      loadData: parameter => {\r\n        //console.log('loadData.parameter', parameter)\r\n        /* this.form.validateFields((error, values) => {\r\n          this.queryParam = values\r\n          //console.log(`查询条件${this.queryParam.hidKey}`)\r\n        }) */\r\n        return getRoomList({ \"sortField\":\"rid\", ...parameter, \"hid\": this.hid }).then(res => {\r\n            if (res.success === true) {\r\n              return { ...parsePage(res) }\r\n            } else {\r\n              return parsePage()\r\n            }\r\n        }).catch(ex => {\r\n          return parsePage()\r\n        })\r\n        // return getServiceList(Object.assign(parameter, this.queryParam)).then(res => {\r\n        //  return res.result\r\n        // })\r\n      },\r\n      hid: this.$route.params.hid,\r\n      selectedRowKeys: [],\r\n      optionAlertShow: false,\r\n      loading: false\r\n   };\r\n },\r\n\r\n computed: {},\r\n\r\n methods: {\r\n    onSelectChange(selectedRowKeys) {\r\n      this.selectedRowKeys = selectedRowKeys;\r\n    },\r\n    handleOk() {\r\n      this.$refs.table.refresh()\r\n    },\r\n    handleEdit(record) {\r\n      //console.log(`编辑房间${record.img}`)\r\n      this.$refs.editModal.edit(record)\t//4.打开编辑表单\r\n    },\r\n    handleDelete(id) {\r\n      //console.log(`删除房间${id}`)\r\n      deleteRoom(id).then(res => {\r\n        if(res.success === true) {\r\n          this.$notification.success({\r\n            message: \"删除成功!\"\r\n          })\r\n        }\r\n        this.$refs.table.refresh(true)\r\n      }).catch( err => {\r\n        this.$message.error(`删除失败: ${err.message}`)\r\n      })\r\n    },\r\n    handleDeleteAll() {\r\n      if(this.selectedRowKeys==\"\") {\r\n        this.$message.warning('请选择要删除的数据')\r\n      }else{\r\n        this.loading = true\r\n        deleteRoomAll({ 'ids':this.selectedRowKeys.join(\",\") }).then(res => {\r\n          //console.log(`批量删除房间${this.selectedRowKeys}`)\r\n          if(res.success === true) {\r\n            this.$notification.success({\r\n              message: \"批量删除成功！\"\r\n            })\r\n            this.loading = false\r\n          }\r\n          this.selectedRowKeys = []\r\n          this.$refs.table.refresh(true)\r\n        }).catch(err => {\r\n          this.loading = false\r\n          this.$message.error(`批量删除失败: ${err.message}`)\r\n        })\r\n      }\r\n    },\r\n    /*打开添加房间窗口*/\r\n    handleAdd() {\r\n      console.log(this.hid)\r\n      this.$refs.addModal.add(this.hid)\r\n    }\r\n }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/admin/RoomManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-locale-provider',{attrs:{\"locale\":_vm.zh_CN}},[_c('div',[_c('router-link',{attrs:{\"to\":{name: 'HotelManage'},\"title\":\"返回酒店管理\"}},[_c('a-icon',{style:({ fontSize: '30px' }),attrs:{\"type\":\"rollback\"}}),_vm._v(\"   返回酒店管理\\r\\n   \")],1),_c('br'),_c('br'),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-bottom\":\"16px\"}},[_c('a-popconfirm',{attrs:{\"title\":\"确认删除所选数据?\",\"okText\":\"是\",\"cancelText\":\"否\"},on:{\"confirm\":_vm.handleDeleteAll}},[_c('a-button',{attrs:{\"type\":\"danger\",\"loading\":_vm.loading}},[_vm._v(\"\\r\\n        批量删除\\r\\n      \")])],1),_vm._v(\" \"),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"\\r\\n        添加房间\\r\\n    \")])],1),_vm._v(\" \"),_c('s-table',{ref:\"table\",attrs:{\"size\":\"default\",\"rowKey\":\"rid\",\"columns\":_vm.columns,\"data\":_vm.loadData,\"rowSelection\":{selectedRowKeys: _vm.selectedRowKeys, onChange: _vm.onSelectChange},\"showPagination\":\"auto\"},scopedSlots:_vm._u([{key:\"assitions\",fn:function(text){return _c('span',{},[_c('ellipsis',{attrs:{\"length\":30,\"tooltip\":\"\"}},[_vm._v(_vm._s(text))])],1)}},{key:\"type\",fn:function(text){return _c('span',{},[_vm._v(\"\\r\\n        \"+_vm._s(_vm._f(\"typeFilter\")(text))+\"\\r\\n      \")])}},{key:\"action\",fn:function(text, record){return _c('span',{},[[_c('a',{attrs:{\"title\":\"编辑房间\"},on:{\"click\":function($event){return _vm.handleEdit(record)}}},[_c('a-icon',{attrs:{\"type\":\"edit\"}})],1),_vm._v(\" \"),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_vm._v(\" \"),_c('a-popconfirm',{attrs:{\"title\":\"确认删除数据?\",\"okText\":\"是\",\"cancelText\":\"否\"},on:{\"confirm\":function($event){return _vm.handleDelete(record.rid)}}},[_c('a',{staticStyle:{\"color\":\"red\"},attrs:{\"title\":\"删除房间\"}},[_c('a-icon',{attrs:{\"type\":\"delete\"}})],1)])]],2)}}])}),_vm._v(\" \"),_c('room-add',{ref:\"addModal\",on:{\"ok\":_vm.handleOk}}),_vm._v(\" \"),_c('room-edit',{ref:\"editModal\",on:{\"ok\":_vm.handleOk}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-482fde0d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/RoomManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-482fde0d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RoomManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoomManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-482fde0d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoomManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-482fde0d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/RoomManage.vue\n// module id = null\n// module chunks = ","// api/upload.js\r\n  import {\r\n    axios\r\n  } from '@/utils/request'\r\n  \r\n  const api = {\r\n    //upload: '/api/upload'\r\n    upload: '/upload'\r\n  }\r\n\r\n  // 文件上传 parameter: { directoryName: hotel/room, img: file }\r\n  export function uploadFile (parameter) {\r\n    return axios({\r\n      url: api.upload,\r\n      method: 'post',\r\n      params: parameter\r\n    })\r\n  }\r\n\r\n  // 根据路径删除文件 parameter: { filePath: xxxxx }\r\n  export function deleteFile (parameter) {\r\n    return axios({\r\n      url: api.upload,\r\n      method: 'delete',\r\n      params: parameter\r\n    })\r\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/api/upload.js"],"sourceRoot":""}